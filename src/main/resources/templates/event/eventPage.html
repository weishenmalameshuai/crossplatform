<#include "../layout.html">
<@layout>
<div id="app">
	<qfdt ref="qfdt" :data.sync="data"></qfdt>
</div>
<script type="text/javascript">
	var v=new Vue({
		el:"#app",
		data:function(){
			return {
				data:{
					parameter:{},
					qf:{
						items:[{
							key:"name_like",
							value:"事件检索"
						}],
						buttons:[{
							value:"查询",
							handler:function(){
								v.$refs.qfdt.flushData();
							}
						},{
							value:"添加",
							handler:function(){
								location.href="toAdd";
							}
						},{
							value:"修改",
							handler:function(){
								var cur=v.$refs.qfdt.getCurrent();
								if(cur){
									location.href="toDetail?id="+cur.id;
								}else{
									sm();
								}
							}
						},{
							value:"查看事件",
							handler:function(){
								var cur=v.$refs.qfdt.getCurrent();
								if(cur){
									location.href="toDetail?id="+cur.id;
								}else{
									sm();
								}
							}
						}]
					},
					dt:{
						items:[{
							key:"event_name",
							value:"事件名称"
						},{
							key:"addtime",
							value:"添加时间"
						}]
					}
				}
			}
		}
	});
</script>
</@layout>
<!--
<#include "../layout.html">
<@layout>
<div id="app">
	<div id="myGrid" style="height: 600px;width:500px;" class="ag-theme-alpine"></div>
</div>
<script type="text/javascript">

	//定义表格列
	var columnDefs = [
		{ headerName: '姓名', field: 'name', 'pinned': 'left' },
		{ headerName: '性别', field: 'sex' },
		{ headerName: '年龄', field: 'age' },
		{ headerName: '籍贯', field: 'jg' },
		{ headerName: '省份', field: 'sf' },
		{ headerName: '地址', field: 'dz' },
	];

	var data = [
		{ name: '张三', sex: '男', age: '100', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路1号' },
		{ name: '李四', sex: '女', age: '5', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '女', age: '20', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路31号' },
		{ name: '王五', sex: '女', age: '26', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路111号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' },
		{ name: '王五', sex: '男', age: '35', 'jg': '中国', 'sf': '浙江', 'dz': '杭州市古墩路12号' }
	];

	//将列和数据赋给gridOptions
	var gridOptions = {
		i18n:'zh-cn', //中文
		columnDefs: columnDefs,  //设置列名
		rowData: data,  //设置数据
		onGridReady: function () {
			//表格创建完成后执行的事件
			gridOptions.api.sizeColumnsToFit();//调整表格大小自适应
		},
		defaultColDef: {
			editable: true,//单元表格是否可编辑
			enableRowGroup: true,
			enablePivot: true,
			enableValue: true,
			sortable: true, //开启排序
			resizable: true,//是否可以调整列大小，就是拖动改变列大小
			filter: true  //开启刷选
		},
		pagination: false,  //开启分页（前端分页）
		paginationAutoPageSize: true, //根据网页高度自动分页（前端分页）
	};

	//在dom加载完成后 初始化agGrid完成
	document.addEventListener("DOMContentLoaded", function () {
		var eGridDiv = document.querySelector('#myGrid');  //myGrid 是容器div的ID
		new agGrid.Grid(eGridDiv, gridOptions);
	});


	var v=new Vue({
		el:"#app",
		data:function(){
			return {
				data:{
					parameter:{},
					qf:{
						items:[{
							key:"name_like",
							value:"事件检索"
						}],
						buttons:[{
							value:"查询",
							handler:function(){
								v.$refs.qfdt.flushData();
							}
						},{
							value:"添加",
							handler:function(){
								location.href="toAdd";
							}
						},{
							value:"修改",
							handler:function(){
								var cur=v.$refs.qfdt.getCurrent();
								if(cur){
									location.href="toDetail?id="+cur.id;
								}else{
									sm();
								}
							}
						},{
							value:"查看事件",
							handler:function(){
								var cur=v.$refs.qfdt.getCurrent();
								if(cur){
									location.href="toDetail?id="+cur.id;
								}else{
									sm();
								}
							}
						}]
					},
					dt:{
						items:[{
							key:"event_name",
							value:"事件名称"
						},{
							key:"addtime",
							value:"添加时间"
						}]
					}
				}
			}
		},
		async mounted() {
			console.log('1');
			const rep = await getJson("",)
		}
	});
</script>
</@layout>-->
